{% extends "barcode/base.html" %}
{% block header %}
    <style type="text/css">@import "/site_media/css/containers.css";</style>
    <!-- CSS file for modal dialog -->
    <style type="text/css" media="screen">@import "/site_media/css/barcode-modals.css";</style>
    <!-- used for modal dialog -->
    <script type="text/javascript" src="/site_media/js/jquery-1.4.2.min.js"></script>
    <script type='text/javascript' src='/site_media/js/jquery.simplemodal.1.4.1.min.js'></script>
    <script type='text/javascript' src='/site_media/js/barcode-modals.js'></script>
</head>
{% endblock %}

{% block content %}
{% if error_message %}
    {% autoescape off %}
    <span class="red"><b>{{ error_message }}</b></span>
    {% endautoescape %}
{% endif %}

  <div id="print">
  <br>
  <table width = "100%" border = "1">
    <tr>
      <td rowspan = "3" width = "40%">
        <span id="noprint">
          &nbsp;&nbsp;
          <span id="header-modal">    
            <a href="#" class="basic"><img src="/site_media/images/filetree/edit.png" title="Edit Record Header"></a>
          </span>
          <span id="history-modal" float="left">
            <a href="#" class="basic"><img src="/site_media/images/filetree/code.png" title="Change History"></a>
          </span>
        </span>
        <b>Company Name: </b>{{ record.company }}<br>
        <b>FOSS Website: </b><a href="{{ record.website }}" target="_blank">{{ record.website }}</a><br>
        <b>Product Name: </b>{{ record.product }}<br>
        <b>Product Version/Release: </b>{{ record.version }}-{{ record.release }}<br>
        <b>Last Updated: </b>{{ record.record_date|date:"M d, Y H:i:s" }}<br>
        <b>Compliance Contact Name: </b>{{ record.contact }}<br>
        <b>Compliance Contact Email: </b><a href="mailto:{{ record.email }}" target="_blank">{{ record.email }}</a><br>
        
      </td>
      <td align = "center" id = "noprint">
        <input type="button" name="doprint" value="Print BoM Compliance Record" onClick="javascript:window.print()">
      </td>
    </tr>    
    <tr>
      <td align = "center">
        <img src="/site_media/user_data/{{ record.id }}/{{ record.checksum }}.png"><br>
        <span id="noprint">
        <a href="/site_media/user_data/{{ record.id }}/{{ record.checksum }}.ps">Download Postscript</a>
        </span>
      </td>
    </tr>
    <tr>
      <td align = "center"><b>Checksum/Site Reference: </b><a href="{{ host_site }}{{ record.checksum }}" target="_blank">{{ record.checksum }}</a></td>
    </tr>
  </table>
  <table border = "1" width = "100%">
    <tr><th colspan = "10">FOSS Bill of Material for {{record.product }}-{{ record.version }}-{{ record.release }}</th></tr>
    <tr>
      <td></td>
      <th>Component</th>
      <th>Version</th>
      <th>Copyright<br>Information</th>
      <th>Attribution<br>Notices</th>
      <th>License<br>Name and Version</th>
      <th>License<br>URL</th>
      <th>Download<br>URL</th>
      <th>SPDX<sup>TM</sup><br>File</th>
      <th>Patch(es)</th>
    </tr>
    {% for row in foss %}
    <tr valign = "top">   
      <td align="center" width="30">
      <span id="noprint">
        <div id="line-item-modal">
            <a href="#" class="basic" name="line_item{{ record.id }}/{{ row.id }}"><img src="/site_media/images/filetree/edit.png" title="Edit Line Item"></a>
        </div>
      </span>     
      </td>
      <td>{{ row.component }}</td>
      <td>{{ row.version }}</td>
      <td>{{ row.copyright }}</td>
      <td>{{ row.attribution }}</td>
      <td>{{ row.license }}</td>
      <td><a href="{{ row.license_url }}" target="_blank">{{ row.license_url }}</a></td>
      <td><a href="{{ row.url }}" target="_blank">{{ row.url }}</a></td>
      {% autoescape off %}
      <td>{{ row.spdx_file }}</td>
      <td>{{ row.patches }}</td>
      {% endautoescape %}
    </tr>
  {% endfor %}
  </table>
  </div>
  <!-- this is the modal popup content for editing the header data -->
  {% include "barcode/edit_header.html" %}
  <!-- this is the modal popup content for viewing the history data -->
  {% include "barcode/history.html" %}
  <!-- this is the modal popup content for editing the line item data -->
  <!-- FIXME - need to populate for the requested record -->
  {% include "barcode/edit_line.html" %}
{% endblock %}

{% block scripts %}
<script language="JavaScript">
    function setdefaults() {
    }
    function update_header() {
        alert("TBD: update header");
        document.forms["headerform"].submit();
    }
</script>
{% endblock %}
